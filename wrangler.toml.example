name = "skillport-connector"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

[vars]
# Your marketplace repository (required)
MARKETPLACE_REPO = "your-org/your-marketplace"

# Your deployed connector URL (required for install script generation)
CONNECTOR_URL = "https://your-connector.your-domain.workers.dev"

# Optional: Restrict to specific Google Workspace domains (comma-separated)
# If not set, all authenticated Google users are allowed
# GOOGLE_ALLOWED_DOMAINS = "your-domain.com"

# KV namespace - create with wrangler and update ID
# npx wrangler kv namespace create OAUTH_KV
[[kv_namespaces]]
binding = "OAUTH_KV"
id = "YOUR_OAUTH_KV_NAMESPACE_ID"

# Durable Object for MCP server
[[durable_objects.bindings]]
name = "MCP_OBJECT"
class_name = "SkillportMCP"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["SkillportMCP"]

# Secrets (set via `npx wrangler secret put <NAME>`)
# GOOGLE_CLIENT_ID      - Google OAuth client ID
# GOOGLE_CLIENT_SECRET  - Google OAuth client secret
# GITHUB_SERVICE_TOKEN  - GitHub PAT for reading marketplace repo (read-only)
# GITHUB_WRITE_TOKEN    - GitHub PAT for writing to marketplace repo (read-write, for editor features)
